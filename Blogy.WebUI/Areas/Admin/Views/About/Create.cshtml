@using Blogy.Business.DTOs.AboutDtos
@model CreateAboutDto
@{
    ViewData["Title"] = "Yeni About";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h3>Yeni About Oluştur</h3>

<form method="post">
    <div class="form-group">
        <label>İçerik</label>

        <textarea asp-for="Content" id="aboutContent" class="form-control" rows="6"></textarea>
    </div>

    <br />

    <button type="button" id="aiGenerateBtn" class="btn btn-warning">
        <i class="fa fa-robot"></i> AI Önerisi Oluştur
    </button>

    <button class="btn btn-primary">Kaydet</button>
</form>

@section Scripts {

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $("#aiGenerateBtn").click(function () {

            $("#aiGenerateBtn").prop("disabled", true).text("AI üretiyor...");

            $.ajax({
                url: "/Admin/About/GenerateAiAbout",
                type: "POST",
                success: function (data) {

                    console.log("AI RESPONSE:", data);

                    $("#aboutContent").val(data);

                    $("#aiGenerateBtn").prop("disabled", false).text("AI Önerisi Oluştur");
                },
                error: function (xhr) {

                    console.log("AJAX ERROR:", xhr);

                    let msg = xhr.responseText ? xhr.responseText : "AI içerik oluşturulamadı!";
                    alert(msg);

                    $("#aiGenerateBtn").prop("disabled", false).text("AI Önerisi Oluştur");
                }
            });

        });
    </script>

}

